---
# handlers file for renew_consul_certificates
- name: "Reload service file"
  ansible.builtin.systemd:
    daemon_reload: true
    scope: system
  become: true
  listen: "systemctl-daemon-reload"

- name: "Enable consul-certs service"
  ansible.builtin.service:
    name: consul-certs
    enabled: true
  become: true
  listen: "systemctl-enable-consul-certs"

- name: "Start consul-certs service"
  ansible.builtin.service:
    name: consul-certs
    state: restarted
  become: true
  listen: "systemctl-restart-consul-certs"
  when: renew_consul_certificates_start_service
